model Activity {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Activity Schedule Connection
  schedules ActivitySchedule[]
  
  // Ressource Connection
  ressources ActivityRessource[]

  // Booking Connection
  bookings  ActivietiesOnBookings[]
}

model ActivitySchedule {
  id        Int      @id @default(autoincrement())
  date      DateTime?
  weekday   Day?
  starts    DateTime @db.Time(0)
  ends      DateTime @db.Time(0)

  activity  Activity @relation(fields: [activityId], references: [id])
  activityId Int
}

enum Day {
  Monday
  Tuesday   
  Wednesday
  Thursday  
  Friday    
  Saturday  
  Sunday    
}

enum RepeatType {
  DAILY
  WEEKLY
  MONTHLY
  YEARLY
}

model ActivityRessource {
  id       Int @id @default(autoincrement())
  quantity Int

  activity   Activity @relation(fields: [activityId], references: [id])
  activityId Int

  ressource  Ressource @relation(fields: [ressourceId], references: [id])
  ressourceId Int
}

model ActivietiesOnBookings {
  booking    Booking  @relation(fields: [bookingId], references: [id])
  bookingId  Int
  activity   Activity @relation(fields: [activityId], references: [id])
  activityId Int
  assignedAt DateTime @default(now())

  @@id([bookingId, activityId])
}
